// QuickSort implementation example from the website

f quicksort(arr:a:i):a:i {
    len:i = array_len(arr);
    result:a:i = if {
        len <= 1 => { r arr; },
        else => {
            pivot:i = danger(array_get(arr, 0));
            rest:a:i = danger(array_slice(arr, 1, len));
            
            less:a:i = filter num in rest {
                y num < pivot;
            };
            
            greater:a:i = filter num in rest {
                y num >= pivot;
            };
            
            r array_concat(
                array_concat(quicksort(less), [pivot]),
                quicksort(greater)
            );
        }
    };
    r result;
}

// Test the quicksort
unsorted:a:i = [3, 1, 4, 1, 5, 9, 2, 6, 5];
sorted:a:i = quicksort(unsorted);

print(`Original: `, unsorted);
print(`Sorted: `, sorted);